{"ast":null,"code":"import React,{useEffect,useState}from'react';import Sidebar from'../components/sidebar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function AccountManagement(){const[data,setData]=useState([]);const[primaryPass,setPass]=useState();const[isDeleted,setDeleted]=useState();useEffect(()=>{fetch('https://online-library-system-api.onrender.com/getCredentials',{method:\"get\"}).then(res=>res.json()).then(data=>{console.log(data);const edited=data.map(item=>({...item,state:false}));setData(edited);}).catch(err=>console.log(err));},[isDeleted]);const editButton=d=>{setPass(d.password);const editData=data.map(d=>({...d}));setData(editData);};const deleteButton=(e,id)=>{e.preventDefault();console.log(id);fetch('https://online-library-system-api.onrender.com/deleteCredentials',{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({id:id})}).then(res=>res.json()).then(data=>alert(data.status)).catch(err=>console.log(err));setDeleted(true);};const editValue=(e,index)=>{console.log(e.target.value);const edited=data.map((item,i)=>i===index?{...item,[e.target.name]:e.target.value}:item);setData(edited);};const doneButton=(e,d)=>{e.preventDefault();if(d.password===primaryPass){editButton(d);}else{fetch('https://online-library-system-api.onrender.com/editCredentials',{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({data:d})}).then(res=>res.json()).then(data=>alert(data.status)).catch(err=>console.log(err));editButton(d);}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{class:\"tw-flex tw-bg-gray-50 tw-min-h-dvh\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{class:\"category table-striped table-responsive tw-w-full tw-flex tw-flex-row tw-justify-center tw-mt-[100px]\",children:/*#__PURE__*/_jsx(\"div\",{class:\"tw-w-[50%]\",children:/*#__PURE__*/_jsxs(\"table\",{class:\"table table-striped tw-text-center\",children:[/*#__PURE__*/_jsx(\"thead\",{class:\"tw-text-center\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"LRN\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Password\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map((d,i)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:d.lrn}),/*#__PURE__*/_jsx(\"td\",{children:d.state?/*#__PURE__*/_jsx(\"input\",{value:d.password,name:\"password\",onChange:e=>{editValue(e,i);}}):/*#__PURE__*/_jsx(_Fragment,{children:d.password})}),/*#__PURE__*/_jsx(\"td\",{class:\"tw-w-[30px]\",children:d.state?/*#__PURE__*/_jsx(\"button\",{class:\"tw-bg-dark-blue tw-rounded-md tw-h-[40px] tw-px-4 tw-w-full tw-border-none tw-outline-none hover:tw-bg-light-steel tw-duration-500\",onClick:e=>{d.state=false;doneButton(e,d);},children:/*#__PURE__*/_jsx(\"label\",{class:\"tw-cursor-pointer tw-text-gray-100\",children:\"Done\"})}):/*#__PURE__*/_jsx(\"button\",{class:\"tw-bg-dark-blue tw-rounded-md tw-h-[40px] tw-px-4 tw-w-full tw-border-none tw-outline-none hover:tw-bg-light-steel tw-duration-500\",onClick:()=>{d.state=true;editButton(d);},children:/*#__PURE__*/_jsx(\"label\",{class:\"tw-cursor-pointer tw-text-gray-100\",children:\"Edit\"})})}),/*#__PURE__*/_jsx(\"td\",{class:\"tw-w-[30px]\",children:/*#__PURE__*/_jsx(\"button\",{class:\"tw-bg-dark-blue tw-rounded-md tw-h-[40px] tw-px-4 tw-w-full tw-border-none tw-outline-none hover:tw-bg-light-steel tw-duration-500\",onClick:e=>deleteButton(e,d._id),children:/*#__PURE__*/_jsx(\"label\",{class:\"tw-cursor-pointer tw-text-gray-100\",children:\"Delete\"})})})]},i))})]})})})]})});}","map":{"version":3,"names":["React","useEffect","useState","Sidebar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AccountManagement","data","setData","primaryPass","setPass","isDeleted","setDeleted","fetch","method","then","res","json","console","log","edited","map","item","state","catch","err","editButton","d","password","editData","deleteButton","e","id","preventDefault","headers","body","JSON","stringify","alert","status","editValue","index","target","value","i","name","doneButton","children","class","scope","lrn","onChange","onClick","_id"],"sources":["C:/Users/Junior/Documents/GitHub/CS134-1P-Journal-Archive-Management-System/frontend/online-library-system/src/pages/accountManagement.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Sidebar from '../components/sidebar';\r\n\r\nexport default function AccountManagement() {\r\n  const [data, setData] = useState([]);\r\n  const [primaryPass, setPass] = useState();\r\n  const [isDeleted, setDeleted] = useState();\r\n\r\n  useEffect(() => {\r\n    fetch('https://online-library-system-api.onrender.com/getCredentials', {\r\n      method: \"get\",\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        console.log(data);\r\n        const edited = data.map((item) => ({ ...item, state: false }));\r\n        setData(edited);\r\n      }\r\n      )\r\n      .catch(err => console.log(err));\r\n\r\n  }, [isDeleted]);\r\n\r\n  const editButton = (d) => {\r\n\r\n    setPass(d.password);\r\n\r\n    const editData = data.map((d) =>\r\n      ({ ...d }))\r\n\r\n    setData(editData);\r\n  }\r\n\r\n  const deleteButton = (e, id) => {\r\n    e.preventDefault();\r\n    console.log(id);\r\n    fetch('https://online-library-system-api.onrender.com/deleteCredentials', {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n\r\n      body: JSON.stringify({ id: id })\r\n\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => alert(data.status))\r\n      .catch(err => console.log(err));\r\n\r\n    setDeleted(true);\r\n  }\r\n\r\n\r\n  const editValue = (e, index) => {\r\n    console.log(e.target.value);\r\n    const edited = data.map((item, i) =>\r\n      i === index ? { ...item, [e.target.name]: e.target.value } : item\r\n    )\r\n\r\n    setData(edited);\r\n  }\r\n\r\n  const doneButton = (e, d) => {\r\n    e.preventDefault();\r\n\r\n    if (d.password === primaryPass) {\r\n      editButton(d);\r\n    }\r\n    else {\r\n      fetch('https://online-library-system-api.onrender.com/editCredentials', {\r\n\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ data: d })\r\n      })\r\n        .then(res => res.json())\r\n        .then(data => alert(data.status))\r\n        .catch(err => console.log(err));\r\n\r\n      editButton(d);\r\n    }\r\n\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      <div class=\"tw-flex tw-bg-gray-50 tw-min-h-dvh\">\r\n        <div>\r\n          <Sidebar />\r\n        </div>\r\n\r\n        <div class=\"category table-striped table-responsive tw-w-full tw-flex tw-flex-row tw-justify-center tw-mt-[100px]\">\r\n          <div class=\"tw-w-[50%]\">\r\n            <table class=\"table table-striped tw-text-center\">\r\n              <thead class=\"tw-text-center\">\r\n                <tr>\r\n                  <th scope=\"col\">#</th>\r\n                  <th scope=\"col\">LRN</th>\r\n                  <th scope=\"col\">Password</th>\r\n                  <th scope=\"col\"></th>\r\n                  <th scope=\"col\"></th>\r\n                </tr>\r\n              </thead>\r\n\r\n              <tbody>\r\n                {data.map((d, i) => (\r\n\r\n                  <tr key={i}>\r\n                    <th scope=\"row\">{i + 1}</th>\r\n                    <td>{d.lrn}</td>\r\n                    <td>{d.state\r\n                      ? <input value={d.password} name=\"password\" onChange={(e) => { editValue(e, i) }}></input>\r\n                      : <>{d.password}</>}</td>\r\n                    <td class=\"tw-w-[30px]\">{d.state\r\n                      ? <button class=\"tw-bg-dark-blue tw-rounded-md tw-h-[40px] tw-px-4 tw-w-full tw-border-none tw-outline-none hover:tw-bg-light-steel tw-duration-500\"\r\n                        onClick={(e) => { d.state = false; doneButton(e, d) }}>\r\n                        <label class=\"tw-cursor-pointer tw-text-gray-100\">Done</label></button>\r\n                      : <button class=\"tw-bg-dark-blue tw-rounded-md tw-h-[40px] tw-px-4 tw-w-full tw-border-none tw-outline-none hover:tw-bg-light-steel tw-duration-500\"\r\n                        onClick={() => { d.state = true; editButton(d) }}>\r\n                        <label class=\"tw-cursor-pointer tw-text-gray-100\">Edit</label></button>\r\n                    }</td>\r\n                    <td class=\"tw-w-[30px]\">\r\n                      <button class=\"tw-bg-dark-blue tw-rounded-md tw-h-[40px] tw-px-4 tw-w-full tw-border-none tw-outline-none hover:tw-bg-light-steel tw-duration-500\"\r\n                        onClick={(e) => deleteButton(e, d._id)}>\r\n                        <label class=\"tw-cursor-pointer tw-text-gray-100\">Delete</label></button>\r\n                    </td>\r\n                  </tr>\r\n\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,OAAO,KAAM,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAE5C,cAAe,SAAS,CAAAC,iBAAiBA,CAAA,CAAG,CAC1C,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACW,WAAW,CAAEC,OAAO,CAAC,CAAGZ,QAAQ,CAAC,CAAC,CACzC,KAAM,CAACa,SAAS,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,CAAC,CAE1CD,SAAS,CAAC,IAAM,CACdgB,KAAK,CAAC,+DAA+D,CAAE,CACrEC,MAAM,CAAE,KACV,CAAC,CAAC,CACCC,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACR,IAAI,EAAI,CACZW,OAAO,CAACC,GAAG,CAACZ,IAAI,CAAC,CACjB,KAAM,CAAAa,MAAM,CAAGb,IAAI,CAACc,GAAG,CAAEC,IAAI,GAAM,CAAE,GAAGA,IAAI,CAAEC,KAAK,CAAE,KAAM,CAAC,CAAC,CAAC,CAC9Df,OAAO,CAACY,MAAM,CAAC,CACjB,CACA,CAAC,CACAI,KAAK,CAACC,GAAG,EAAIP,OAAO,CAACC,GAAG,CAACM,GAAG,CAAC,CAAC,CAEnC,CAAC,CAAE,CAACd,SAAS,CAAC,CAAC,CAEf,KAAM,CAAAe,UAAU,CAAIC,CAAC,EAAK,CAExBjB,OAAO,CAACiB,CAAC,CAACC,QAAQ,CAAC,CAEnB,KAAM,CAAAC,QAAQ,CAAGtB,IAAI,CAACc,GAAG,CAAEM,CAAC,GACzB,CAAE,GAAGA,CAAE,CAAC,CAAC,CAAC,CAEbnB,OAAO,CAACqB,QAAQ,CAAC,CACnB,CAAC,CAED,KAAM,CAAAC,YAAY,CAAGA,CAACC,CAAC,CAAEC,EAAE,GAAK,CAC9BD,CAAC,CAACE,cAAc,CAAC,CAAC,CAClBf,OAAO,CAACC,GAAG,CAACa,EAAE,CAAC,CACfnB,KAAK,CAAC,kEAAkE,CAAE,CACxEC,MAAM,CAAE,MAAM,CACdoB,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CAEDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEL,EAAE,CAAEA,EAAG,CAAC,CAEjC,CAAC,CAAC,CACCjB,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACR,IAAI,EAAI+B,KAAK,CAAC/B,IAAI,CAACgC,MAAM,CAAC,CAAC,CAChCf,KAAK,CAACC,GAAG,EAAIP,OAAO,CAACC,GAAG,CAACM,GAAG,CAAC,CAAC,CAEjCb,UAAU,CAAC,IAAI,CAAC,CAClB,CAAC,CAGD,KAAM,CAAA4B,SAAS,CAAGA,CAACT,CAAC,CAAEU,KAAK,GAAK,CAC9BvB,OAAO,CAACC,GAAG,CAACY,CAAC,CAACW,MAAM,CAACC,KAAK,CAAC,CAC3B,KAAM,CAAAvB,MAAM,CAAGb,IAAI,CAACc,GAAG,CAAC,CAACC,IAAI,CAAEsB,CAAC,GAC9BA,CAAC,GAAKH,KAAK,CAAG,CAAE,GAAGnB,IAAI,CAAE,CAACS,CAAC,CAACW,MAAM,CAACG,IAAI,EAAGd,CAAC,CAACW,MAAM,CAACC,KAAM,CAAC,CAAGrB,IAC/D,CAAC,CAEDd,OAAO,CAACY,MAAM,CAAC,CACjB,CAAC,CAED,KAAM,CAAA0B,UAAU,CAAGA,CAACf,CAAC,CAAEJ,CAAC,GAAK,CAC3BI,CAAC,CAACE,cAAc,CAAC,CAAC,CAElB,GAAIN,CAAC,CAACC,QAAQ,GAAKnB,WAAW,CAAE,CAC9BiB,UAAU,CAACC,CAAC,CAAC,CACf,CAAC,IACI,CACHd,KAAK,CAAC,gEAAgE,CAAE,CAEtEC,MAAM,CAAE,MAAM,CACdoB,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAE9B,IAAI,CAAEoB,CAAE,CAAC,CAClC,CAAC,CAAC,CACCZ,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACR,IAAI,EAAI+B,KAAK,CAAC/B,IAAI,CAACgC,MAAM,CAAC,CAAC,CAChCf,KAAK,CAACC,GAAG,EAAIP,OAAO,CAACC,GAAG,CAACM,GAAG,CAAC,CAAC,CAEjCC,UAAU,CAACC,CAAC,CAAC,CACf,CAEF,CAAC,CAGD,mBACE1B,IAAA,CAAAI,SAAA,EAAA0C,QAAA,cACE5C,KAAA,QAAK6C,KAAK,CAAC,oCAAoC,CAAAD,QAAA,eAC7C9C,IAAA,QAAA8C,QAAA,cACE9C,IAAA,CAACF,OAAO,GAAE,CAAC,CACR,CAAC,cAENE,IAAA,QAAK+C,KAAK,CAAC,uGAAuG,CAAAD,QAAA,cAChH9C,IAAA,QAAK+C,KAAK,CAAC,YAAY,CAAAD,QAAA,cACrB5C,KAAA,UAAO6C,KAAK,CAAC,oCAAoC,CAAAD,QAAA,eAC/C9C,IAAA,UAAO+C,KAAK,CAAC,gBAAgB,CAAAD,QAAA,cAC3B5C,KAAA,OAAA4C,QAAA,eACE9C,IAAA,OAAIgD,KAAK,CAAC,KAAK,CAAAF,QAAA,CAAC,GAAC,CAAI,CAAC,cACtB9C,IAAA,OAAIgD,KAAK,CAAC,KAAK,CAAAF,QAAA,CAAC,KAAG,CAAI,CAAC,cACxB9C,IAAA,OAAIgD,KAAK,CAAC,KAAK,CAAAF,QAAA,CAAC,UAAQ,CAAI,CAAC,cAC7B9C,IAAA,OAAIgD,KAAK,CAAC,KAAK,CAAK,CAAC,cACrBhD,IAAA,OAAIgD,KAAK,CAAC,KAAK,CAAK,CAAC,EACnB,CAAC,CACA,CAAC,cAERhD,IAAA,UAAA8C,QAAA,CACGxC,IAAI,CAACc,GAAG,CAAC,CAACM,CAAC,CAAEiB,CAAC,gBAEbzC,KAAA,OAAA4C,QAAA,eACE9C,IAAA,OAAIgD,KAAK,CAAC,KAAK,CAAAF,QAAA,CAAEH,CAAC,CAAG,CAAC,CAAK,CAAC,cAC5B3C,IAAA,OAAA8C,QAAA,CAAKpB,CAAC,CAACuB,GAAG,CAAK,CAAC,cAChBjD,IAAA,OAAA8C,QAAA,CAAKpB,CAAC,CAACJ,KAAK,cACRtB,IAAA,UAAO0C,KAAK,CAAEhB,CAAC,CAACC,QAAS,CAACiB,IAAI,CAAC,UAAU,CAACM,QAAQ,CAAGpB,CAAC,EAAK,CAAES,SAAS,CAACT,CAAC,CAAEa,CAAC,CAAC,CAAC,CAAE,CAAQ,CAAC,cACxF3C,IAAA,CAAAI,SAAA,EAAA0C,QAAA,CAAGpB,CAAC,CAACC,QAAQ,CAAG,CAAC,CAAK,CAAC,cAC3B3B,IAAA,OAAI+C,KAAK,CAAC,aAAa,CAAAD,QAAA,CAAEpB,CAAC,CAACJ,KAAK,cAC5BtB,IAAA,WAAQ+C,KAAK,CAAC,oIAAoI,CAClJI,OAAO,CAAGrB,CAAC,EAAK,CAAEJ,CAAC,CAACJ,KAAK,CAAG,KAAK,CAAEuB,UAAU,CAACf,CAAC,CAAEJ,CAAC,CAAC,CAAC,CAAE,CAAAoB,QAAA,cACtD9C,IAAA,UAAO+C,KAAK,CAAC,oCAAoC,CAAAD,QAAA,CAAC,MAAI,CAAO,CAAC,CAAQ,CAAC,cACvE9C,IAAA,WAAQ+C,KAAK,CAAC,oIAAoI,CAClJI,OAAO,CAAEA,CAAA,GAAM,CAAEzB,CAAC,CAACJ,KAAK,CAAG,IAAI,CAAEG,UAAU,CAACC,CAAC,CAAC,CAAC,CAAE,CAAAoB,QAAA,cACjD9C,IAAA,UAAO+C,KAAK,CAAC,oCAAoC,CAAAD,QAAA,CAAC,MAAI,CAAO,CAAC,CAAQ,CAAC,CACtE,CAAC,cACN9C,IAAA,OAAI+C,KAAK,CAAC,aAAa,CAAAD,QAAA,cACrB9C,IAAA,WAAQ+C,KAAK,CAAC,oIAAoI,CAChJI,OAAO,CAAGrB,CAAC,EAAKD,YAAY,CAACC,CAAC,CAAEJ,CAAC,CAAC0B,GAAG,CAAE,CAAAN,QAAA,cACvC9C,IAAA,UAAO+C,KAAK,CAAC,oCAAoC,CAAAD,QAAA,CAAC,QAAM,CAAO,CAAC,CAAQ,CAAC,CACzE,CAAC,GAlBEH,CAmBL,CAEL,CAAC,CACG,CAAC,EACH,CAAC,CACL,CAAC,CACH,CAAC,EACH,CAAC,CACN,CAAC,CAEP"},"metadata":{},"sourceType":"module","externalDependencies":[]}