{"ast":null,"code":"import{useEffect,useState}from\"react\";import axios from\"axios\";import Pagination from\"./Pagination\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Category(_ref){let{search,category}=_ref;const[data,setData]=useState([]);const[loading,setLoading]=useState(false);const[currentPage,setCurrentpage]=useState(1);const[postsPerPage,setPostsperpage]=useState(5);//Post per page\nconst[sortingType,setSortingType]=useState(1);//1: Ascending || -1: Descending\nuseEffect(()=>{if(search.length===0){fetch('https://online-library-system-api.onrender.com/'+category,{method:\"get\"}).then(res=>res.json()).then(data=>setData(data)).catch(err=>console.log(err));}else{const journal={Search:search,Categ:category};fetch('https://online-library-system-api.onrender.com/searchbar-category',{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(journal)// headers: new Headers({\n//   \"ngrok-skip-browser-warning\": \"89420\",\n// }),\n}).then(res=>res.json()).then(data=>setData(data)).catch(err=>console.log(err));}},[search]);const ShowPDF=(pdfdestination,title)=>{fetch('https://online-library-system-api.onrender.com/viewAdd',{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({Title:title})});window.open('https://online-library-system-api.onrender.com/uploads/'+pdfdestination,\"_blank\",\"noreferrer\");};// const DownloadPDF = (pdfdestination, title) => {\n//     fetch('http://localhost:8081/downloadAdd', {\n//         method: \"POST\",\n//         headers: {\n//             \"Content-Type\": \"application/json\",\n//         },\n//         body: JSON.stringify({Title: title})\n//     });\n//     axios.get('http://localhost:8081/uploads/' + pdfdestination, {\n//         responseType: 'blob',\n//         headers: {\n//             'Content-Type': 'application/pdf',\n//         }\n//     })\n//     .then((obj) => {\n//         const url = URL.createObjectURL(obj.data);\n//         const a = document.createElement('a');\n//         a.href = url;\n//         a.download = pdfdestination;\n//         a.style.display = 'none';\n//         document.body.appendChild(a);\n//         a.click();\n//         a.remove();\n//         URL.revokeObjectURL(url);\n//     })\n//     .catch(err => console.error(err));\n// }\n//Get current posts\nconst indexOfLastPost=currentPage*postsPerPage;const indexOfFirstPost=indexOfLastPost-postsPerPage;const currentPost=data.sort((a,b)=>{return sortingType*a.title.localeCompare(b.title);}).slice(indexOfFirstPost,indexOfLastPost);//Change page\nconst setPostCount=postCount=>setPostsperpage(postCount);const paginate=pageNumber=>setCurrentpage(pageNumber);const sorting=type=>setSortingType(type);return/*#__PURE__*/_jsxs(\"div\",{class:\"\",children:[/*#__PURE__*/_jsxs(\"table\",{class:\" tw-table-fixed tw-text-center tw-w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{class:\"tw-text-center tw-bg-steel-blue\",children:/*#__PURE__*/_jsxs(\"tr\",{class:\"tw-text-text-blue\",children:[/*#__PURE__*/_jsx(\"th\",{class:\"sm:tw-hidden tw-py-4\",children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{class:\"sm:tw-hidden tw-py-4\",children:\"Author\"}),/*#__PURE__*/_jsx(\"th\",{class:\"md:tw-hidden tw-py-4\",children:\"Journal\"}),/*#__PURE__*/_jsx(\"th\",{class:\"sm:tw-hidden\",children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{class:\"sm:tw-hidden\",children:\"Year\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{class:\"tw-divide-y tw-divide-gray-300 tw-bg-gray-100\",children:currentPost.map((d,i)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{class:\"tw-break-words tw-text-left tw-text-wrap tw-pl-4 tw-pr-3 tw-text-gray-900 sm:tw-pl-6 sm:tw-pt-4\",children:[d.title,/*#__PURE__*/_jsxs(\"dl\",{class:\"md:tw-hidden\",children:[/*#__PURE__*/_jsx(\"dt\",{class:\"tw-sr-only\",children:\"Category\"}),/*#__PURE__*/_jsx(\"dd\",{class:\"tw-pt-2\",children:d.category}),/*#__PURE__*/_jsx(\"dt\",{class:\"tw-sr-only\",children:\"Year\"}),/*#__PURE__*/_jsx(\"dd\",{children:d.year})]})]}),/*#__PURE__*/_jsx(\"td\",{class:\"sm:tw-hidden tw-whitespace-nowrap tw-py-4 tw-pl-4 tw-pr-3 tw-text-gray-900\",children:d.author}),/*#__PURE__*/_jsx(\"td\",{class:\"sm:tw-hidden tw-whitespace-nowrap tw-py-4 tw-pl-4 tw-pr-3 tw-text-gray-900\",children:d.category}),/*#__PURE__*/_jsx(\"td\",{class:\"sm:tw-hidden tw-whitespace-nowrap tw-py-4 tw-pl-4 tw-pr-3 tw-text-gray-900\",children:d.year}),/*#__PURE__*/_jsx(\"td\",{class:\"tw-py-4  tw-pl-4 tw-pr-3 tw-justify-center\",children:/*#__PURE__*/_jsx(\"button\",{class:\" tw-bg-btn-blue tw-border-none tw-mr-2 tw-outline-none hover:tw-bg-dark-steel tw-duration-500 tw-rounded-md\",onClick:()=>ShowPDF(d.destination,d.title),children:/*#__PURE__*/_jsx(\"i\",{class:\"bi bi-eye-fill tw-text-xl tw-text-text-blue\"})})})]},i))})]}),/*#__PURE__*/_jsx(\"div\",{class:\"tw-flex tw-justify-end tw-pt-5\",children:/*#__PURE__*/_jsx(Pagination,{postsPerPage:postsPerPage,setPostsPerPage:setPostCount,totalPosts:data.length,paginate:paginate,sortType:sortingType,setSortType:sorting})})]});}","map":{"version":3,"names":["useEffect","useState","axios","Pagination","jsx","_jsx","jsxs","_jsxs","Category","_ref","search","category","data","setData","loading","setLoading","currentPage","setCurrentpage","postsPerPage","setPostsperpage","sortingType","setSortingType","length","fetch","method","then","res","json","catch","err","console","log","journal","Search","Categ","headers","body","JSON","stringify","ShowPDF","pdfdestination","title","Title","window","open","indexOfLastPost","indexOfFirstPost","currentPost","sort","a","b","localeCompare","slice","setPostCount","postCount","paginate","pageNumber","sorting","type","class","children","map","d","i","year","author","onClick","destination","setPostsPerPage","totalPosts","sortType","setSortType"],"sources":["C:/Users/Junior/Documents/GitHub/CS134-1P-Journal-Archive-Management-System/frontend/online-library-system/src/components/category.js"],"sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport axios from \"axios\";\r\nimport Pagination from \"./Pagination\";\r\n\r\nexport default function Category({ search, category }) {\r\n    const [data, setData] = useState([]);\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [currentPage, setCurrentpage] = useState(1);\r\n    const [postsPerPage, setPostsperpage] = useState(5); //Post per page\r\n\r\n    const [sortingType, setSortingType] = useState(1) //1: Ascending || -1: Descending\r\n\r\n    useEffect(() => {\r\n        if (search.length === 0) {\r\n            fetch('https://online-library-system-api.onrender.com/' + category, {\r\n                method: \"get\",\r\n            })\r\n                .then(res => res.json())\r\n                .then(data => setData(data))\r\n                .catch(err => console.log(err));\r\n        }\r\n\r\n        else {\r\n            const journal = {\r\n                Search: search,\r\n                Categ: category,\r\n            }\r\n            fetch('https://online-library-system-api.onrender.com/searchbar-category', {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                body: JSON.stringify(journal)\r\n                // headers: new Headers({\r\n                //   \"ngrok-skip-browser-warning\": \"89420\",\r\n                // }),\r\n            })\r\n                .then(res => res.json())\r\n                .then(data => setData(data))\r\n                .catch(err => console.log(err));\r\n        }\r\n\r\n    }, [search])\r\n\r\n    const ShowPDF = (pdfdestination, title) => {\r\n\r\n        fetch('https://online-library-system-api.onrender.com/viewAdd', {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n\r\n            },\r\n            body: JSON.stringify({ Title: title })\r\n        });\r\n\r\n        window.open('https://online-library-system-api.onrender.com/uploads/' + pdfdestination, \"_blank\", \"noreferrer\");\r\n    }\r\n\r\n    // const DownloadPDF = (pdfdestination, title) => {\r\n\r\n    //     fetch('http://localhost:8081/downloadAdd', {\r\n    //         method: \"POST\",\r\n    //         headers: {\r\n    //             \"Content-Type\": \"application/json\",\r\n    //         },\r\n    //         body: JSON.stringify({Title: title})\r\n    //     });\r\n\r\n    //     axios.get('http://localhost:8081/uploads/' + pdfdestination, {\r\n    //         responseType: 'blob',\r\n    //         headers: {\r\n    //             'Content-Type': 'application/pdf',\r\n    //         }\r\n    //     })\r\n    //     .then((obj) => {\r\n    //         const url = URL.createObjectURL(obj.data);\r\n    //         const a = document.createElement('a');\r\n    //         a.href = url;\r\n    //         a.download = pdfdestination;\r\n    //         a.style.display = 'none';\r\n    //         document.body.appendChild(a);\r\n    //         a.click();\r\n    //         a.remove();\r\n    //         URL.revokeObjectURL(url);\r\n    //     })\r\n    //     .catch(err => console.error(err));\r\n    // }\r\n\r\n\r\n    //Get current posts\r\n    const indexOfLastPost = currentPage * postsPerPage;\r\n    const indexOfFirstPost = indexOfLastPost - postsPerPage;\r\n    const currentPost = data\r\n        .sort((a, b) => {\r\n            return sortingType * a.title.localeCompare(b.title)\r\n        })\r\n        .slice(indexOfFirstPost, indexOfLastPost);\r\n\r\n    //Change page\r\n    const setPostCount = (postCount) => setPostsperpage(postCount);\r\n    const paginate = (pageNumber) => setCurrentpage(pageNumber);\r\n    const sorting = (type) => setSortingType(type)\r\n\r\n    return (\r\n        <div class=\"\">\r\n            <table class=\" tw-table-fixed tw-text-center tw-w-full\">\r\n                <thead class=\"tw-text-center tw-bg-steel-blue\">\r\n                    <tr class=\"tw-text-text-blue\">\r\n                        {/* <th class=\"sm:tw-hidden\">No.</th> */}\r\n                        <th class=\"sm:tw-hidden tw-py-4\">Title</th>\r\n                        <th class=\"sm:tw-hidden tw-py-4\">Author</th>\r\n                        <th class=\"md:tw-hidden tw-py-4\">Journal</th>\r\n                        <th class=\"sm:tw-hidden\">Category</th>\r\n                        <th class=\"sm:tw-hidden\">Year</th>\r\n                        {/* <th>Actions</th> */}\r\n                        {/* <th scope=\"col\"></th> */}\r\n                    </tr>\r\n                </thead>\r\n\r\n                <tbody class=\"tw-divide-y tw-divide-gray-300 tw-bg-gray-100\">\r\n                    {currentPost.map((d, i) => (\r\n                        <tr key={i}>\r\n                            {/* <th class=\"sm:tw-hidden tw-whitespace-nowrap tw-py-4 tw-pl-4 tw-pr-3 tw-text-gray-900\">{indexOfFirstPost + 1 + i}</th> */}\r\n                            <td class=\"tw-break-words tw-text-left tw-text-wrap tw-pl-4 tw-pr-3 tw-text-gray-900 sm:tw-pl-6 sm:tw-pt-4\">\r\n                                {d.title}\r\n                                <dl class=\"md:tw-hidden\">\r\n                                    <dt class=\"tw-sr-only\">Category</dt>\r\n                                    <dd class=\"tw-pt-2\">{d.category}</dd>\r\n                                    <dt class=\"tw-sr-only\">Year</dt>\r\n                                    <dd>{d.year}</dd>\r\n                                </dl>\r\n                            </td>\r\n                            <td class=\"sm:tw-hidden tw-whitespace-nowrap tw-py-4 tw-pl-4 tw-pr-3 tw-text-gray-900\">{d.author}</td>\r\n                            <td class=\"sm:tw-hidden tw-whitespace-nowrap tw-py-4 tw-pl-4 tw-pr-3 tw-text-gray-900\">{d.category}</td>\r\n                            <td class=\"sm:tw-hidden tw-whitespace-nowrap tw-py-4 tw-pl-4 tw-pr-3 tw-text-gray-900\">{d.year}</td>\r\n                            <td class=\"tw-py-4  tw-pl-4 tw-pr-3 tw-justify-center\">\r\n                                <button class=\" tw-bg-btn-blue tw-border-none tw-mr-2 tw-outline-none hover:tw-bg-dark-steel tw-duration-500 tw-rounded-md\"\r\n                                    onClick={() => ShowPDF(d.destination, d.title)}>\r\n                                    <i class=\"bi bi-eye-fill tw-text-xl tw-text-text-blue\"></i>\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n\r\n            <div class=\"tw-flex tw-justify-end tw-pt-5\">\r\n                <Pagination postsPerPage={postsPerPage} setPostsPerPage={setPostCount} totalPosts={data.length} paginate={paginate} sortType={sortingType} setSortType={sorting} />\r\n            </div>\r\n        </div>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}